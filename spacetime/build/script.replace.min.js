function SfxrParams(){this.setSettings=function(c){for(let d=0;d<24;d++)this[String.fromCharCode(97+d)]=c[d]||0;this.c<.01&&(this.c=.01);let b=this.b+this.c+this.e;if(b<.18){let a=.18/b;this.b*=a,this.c*=a,this.e*=a}}}function SfxrSynth(){this._params=new SfxrParams;let e,c,d,b,h,g,l,i,j,f,a,k;this.reset=function(){let c=this._params;b=100/(c.f*c.f+.001),h=100/(c.g*c.g+.001),g=1-c.h*c.h*c.h*.01,l=-c.i*c.i*c.i*1e-6,c.a||(a=.5-c.n/2,k=-c.o*5e-5),i=1+c.l*c.l*(c.l>0?-.9:10),j=0,f=c.m==1?0:(1-c.m)*(1-c.m)*2e4+32},this.totalReset=function(){this.reset();let a=this._params;return e=a.b*a.b*1e5,c=a.c*a.c*1e5,d=a.e*a.e*1e5+12,((e+c+d)/3|0)*3},this.synthWave=function(a0,U){let m=this._params;let N=m.s!=1||m.v,t=m.v*m.v*.1,L=1+m.w*3e-4,q=m.s*m.s*m.s*.1,Y=1+m.t*1e-4,_=m.s!=1,Q=m.x*m.x,S=m.g,O=m.q||m.r,W=m.r*m.r*m.r*.2,H=m.q*m.q*(m.q<0?-1020:1020),I=m.p?((1-m.p)*(1-m.p)*2e4|0)+32:0,Z=m.d,J=m.j/2,$=m.k*m.k*.01,G=m.a;let F=e,T=1/e,X=1/c,V=1/d;let x=5/(1+m.u*m.u*20)*(.01+q);x>.8&&(x=.8),x=1-x;let D=!1,P=0,v=0,u=0,C=0,A=0,R,y=0,o,r=0,s,E=0,p,M=0,n,z,K=0;let B=new Array(1024),w=new Array(32);for(let a=B.length;a--;)B[a]=0;for(let a=w.length;a--;)w[a]=Math.random()*2-1;for(let e=0;e<U;e++){if(D)return e;if(I&&++M>=I&&(M=0,this.reset()),f&&++j>=f&&(f=0,b*=i),g+=l,b*=g,b>h&&(b=h,S>0&&(D=!0)),o=b,J>0&&(K+=$,o*=1+Math.sin(K)*J),o|=0,o<8&&(o=8),G||(a+=k,a<0?a=0:a>.5&&(a=.5)),++v>F){v=0;switch(++P){case 1:F=c;break;case 2:F=d}}switch(P){case 0:u=v*T;break;case 1:u=1+(1-v*X)*2*Z;break;case 2:u=1-v*V;break;case 3:u=0;D=!0}O&&(H+=W,s=H|0,s<0?s=-s:s>1023&&(s=1023)),N&&L&&(t*=L,t<1e-5?t=1e-5:t>.1&&(t=.1)),z=0;for(let b=8;b--;){if(r++,r>=o&&(r%=o,G==3))for(let a=w.length;a--;)w[a]=Math.random()*2-1;switch(G){case 0:n=r/o<a?.5:-.5;break;case 1:n=1-r/o*2;break;case 2:p=r/o;p=(p>.5?p-1:p)*6.28318531;n=1.27323954*p+.405284735*p*p*(p<0?1:-1);n=.225*((n<0?-1:1)*n*n-n)+n;break;case 3:n=w[Math.abs(r*32/o|0)]}N&&(R=y,q*=Y,q<0?q=0:q>.1&&(q=.1),_?(A+=(n-y)*q,A*=x):(y=n,A=0),y+=A,C+=y-R,C*=1-t,n=C),O&&(B[E%1024]=n,n+=B[(E-s+1024)%1024],E++),z+=n}z*=.125*u*Q,a0[e]=z>=1?32767:z<=-1?-32768:z*32767|0}return U}}let synth=new SfxrSynth;let jsfxr=function(i){synth._params.setSettings(i);let g=synth.totalReset();let b=new Uint8Array(((g+1)/2|0)*4+44);let d=synth.synthWave(new Uint16Array(b.buffer,44),g)*2;let a=new Uint32Array(b.buffer,0,44);a[0]=1179011410,a[1]=d+36,a[2]=1163280727,a[3]=544501094,a[4]=16,a[5]=65537,a[6]=44100,a[7]=88200,a[8]=1048578,a[9]=1635017060,a[10]=d,d+=44;let c=0,e='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',h='data:audio/wav;base64,';for(;c<d;c+=3){let f=b[c]<<16|b[c+1]<<8|b[c+2];h+=e[f>>18]+e[f>>12&63]+e[f>>6&63]+e[f&63]}return h};playSound=(d,e,f)=>{let b=n(svgNode.viewBox.baseVal.x+window.innerWidth*zoom/2,svgNode.viewBox.baseVal.y+window.innerHeight*zoom/2,e,f);if(b<2e3){let c=jsfxr(d);let a=new Audio;a.src=c,a.volume=-(5e-4*b)+1,a.play()}},soundGenerator=(()=>{defaultSynth={waveType:0,startFrequency:.3,minFrequency:0,slide:0,deltaSlide:0,squareDuty:0,dutySweep:0,vibratoDepth:0,vibratoSpeed:0,attackTime:0,sustainTime:.3,decayTime:.4,sustainPunch:0,lpFilterResonance:0,lpFilterCutoff:1,lpFilterCutoffSweep:0,hpFilterCutoff:0,hpFilterCutoffSweep:0,phaserOffset:0,phaserSweep:0,repeatSpeed:0,changeSpeed:0,changeAmount:0};let a=a=>[a.waveType,a.attackTime,a.sustainTime,a.sustainPunch,a.decayTime,a.startFrequency,a.minFrequency,a.slide,a.deltaSlide,a.vibratoDepth,a.vibratoSpeed,a.changeAmount,a.changeSpeed,a.squareDuty,a.dutySweep,a.repeatSpeed,a.phaserOffset,a.phaserSweep,a.lpFilterCutoff,a.lpFilterCutoffSweep,a.lpFilterResonance,a.hpFilterCutoff,a.hpFilterCutoffSweep,.5];return{generatePickupCoin:()=>{let b=Object.assign({},defaultSynth);return b.startFrequency=.4+Math.random()*.5,b.sustainTime=Math.random()*.1,b.decayTime=.1+Math.random()*.4,b.sustainPunch=.3+Math.random()*.3,Math.random()<.5&&(b.changeSpeed=.5+Math.random()*.2,b.changeAmount=.2+Math.random()*.4),a(b)},generateLaserShoot:()=>{let b=Object.assign({},defaultSynth);return b.waveType=Math.floor(Math.random()*3),b.waveType==2&&Math.random()<.5&&(b.waveType=Math.floor(Math.random()*2)),b.startFrequency=.5+Math.random()*.5,b.minFrequency=b.startFrequency-.2-Math.random()*.6,b.minFrequency<.2&&(b.minFrequency=.2),b.slide=-.15-Math.random()*.2,Math.random()<.33&&(b.startFrequency=.3+Math.random()*.6,b.minFrequency=Math.random()*.1,b.slide=-.35-Math.random()*.3),Math.random()<.5?(b.squareDuty=Math.random()*.5,b.dutySweep=Math.random()*.2):(b.squareDuty=.4+Math.random()*.5,b.dutySweep=-Math.random()*.7),b.sustainTime=.1+Math.random()*.2,b.decayTime=Math.random()*.4,Math.random()<.5&&(b.sustainPunch=Math.random()*.3),Math.random()<.33&&(b.phaserOffset=Math.random()*.2,b.phaserSweep=-Math.random()*.2),Math.random()<.5&&(b.hpFilterCutoff=Math.random()*.3),a(b)},generateExplosion:()=>{let b=Object.assign({},defaultSynth);return b.waveType=3,Math.random()<.5?(b.startFrequency=.1+Math.random()*.4,b.slide=-.1+Math.random()*.4):(b.startFrequency=.2+Math.random()*.7,b.slide=-.2-Math.random()*.2),b.startFrequency*=b.startFrequency,Math.random()<.2&&(b.slide=0),Math.random()<.33&&(b.repeatSpeed=.3+Math.random()*.5),b.sustainTime=.1+Math.random()*.3,b.decayTime=Math.random()*.5,b.sustainPunch=.2+Math.random()*.6,Math.random()<.5&&(b.phaserOffset=-.3+Math.random()*.9,b.phaserSweep=-Math.random()*.3),Math.random()<.33&&(b.changeSpeed=.6+Math.random()*.3,b.changeAmount=.8-Math.random()*1.6),a(b)},generatePowerup:()=>{let b=Object.assign({},defaultSynth);return Math.random()<.5?b.waveType=1:b.squareDuty=Math.random()*.6,Math.random()<.5?(b.startFrequency=.2+Math.random()*.3,b.slide=.1+Math.random()*.4,b.repeatSpeed=.4+Math.random()*.4):(b.startFrequency=.2+Math.random()*.3,b.slide=5+Math.random()*.2,Math.random()<.5&&(b.vibratoDepth=Math.random()*.7,b.vibratoSpeed=Math.random()*.6)),b.sustainTime=Math.random()*.4,b.decayTime=.1+Math.random()*.4,a(b)},generateHitHurt:()=>{let b=Object.assign({},defaultSynth);return b.waveType=Math.floor(Math.random()*3),b.waveType==2?b.waveType=3:b.waveType==0&&(b.squareDuty=Math.random()*.6),b.startFrequency=.2+Math.random()*.6,b.slide=-.3-Math.random()*.4,b.sustainTime=Math.random()*.1,b.decayTime=.1+Math.random()*.2,Math.random()<.5&&(b.hpFilterCutoff=Math.random()*.3),a(b)},generateJump:()=>{let b=Object.assign({},defaultSynth);return b.waveType=0,b.squareDuty=Math.random()*.6,b.startFrequency=.3+Math.random()*.3,b.slide=.1+Math.random()*.2,b.sustainTime=.1+Math.random()*.3,b.decayTime=.1+Math.random()*.2,Math.random()<.5&&(b.hpFilterCutoff=Math.random()*.3),Math.random()<.5&&(b.lpFilterCutoff=1-Math.random()*.6),a(b)},generateBlipSelect:()=>{let b=Object.assign({},defaultSynth);return b.waveType=Math.floor(Math.random()*2),b.waveType==0&&(b.squareDuty=Math.random()*.6),b.startFrequency=.2+Math.random()*.4,b.sustainTime=.1+Math.random()*.1,b.decayTime=Math.random()*.2,b.hpFilterCutoff=.1,a(b)}}})(),m=(a,b,c,d)=>((Math.atan2(d-b,c-a))*180/Math.PI),n=(c,d,a,b)=>(Math.sqrt((a-=c)*a+(b-=d)*b)),o=(a,b)=>((Math.cos(b*Math.PI/180))*a),p=(a,b)=>((Math.sin(b*Math.PI/180))*a),motionAdd=(a,d,e)=>{let b=o(a.e,a.d)+o(d,e);let c=p(a.e,a.d)+p(d,e);a.e=Math.hypot(b,c),a.d=m(0,0,b,c)},randomSign=()=>Math.random()>.5?-1:1,a=(a,b,c)=>{a.transform.baseVal[0].matrix.e=b,a.transform.baseVal[0].matrix.f=c},b=(a,b,c,d)=>{a.transform.baseVal[1].setRotate(b,c,d)},createExplosion=(a,b,c)=>{playSound(c,a,b);for(let d=0;d<16;d++){if(!nodeExplosions.length)return;explosionClone=nodeExplosions.pop(),explosionClone.style.fill=['#FD6D0A','#FE9923','#FFDE03','#fff'][Math.floor(d/4)],explosionClone.r.baseVal.value=10,explosionClone.style.opacity=1,explosionClone.style.display='',ac.push({x:a+(Math.random()*10-5),y:b+(Math.random()*10-5),c:explosionClone,life:5e3,e:Math.random()/2,d:Math.random()*360,animationState:0,animationSpeed:Math.random()*2+5,animate:a=>{a.animationState+=a.animationSpeed,a.c.r.baseVal.value=-(Math.cos(a.animationState*(Math.PI/100))-1)*5,a.c.style.opacity-=.02,a.animationState>200&&(a.life=0)},destroy:a=>{a.style.display='none',nodeExplosions.push(a)}})}},emit=(a,d,e,b,c)=>{if(a.af--,a.af<0){a.af=a.ag;for(let f=0;f<a.ah;f++){if(!nodeBubbles.length)return;ak=nodeBubbles.pop(),ak.style.opacity=1,ak.style.display='',ac.push({x:d+o(-b,c),y:e+p(-b,c),c:ak,life:30,e:b/10,d:c-180+(Math.random()*30-15),animate:a=>{a.c.style.opacity-=.04},destroy:a=>{a.style.display='none',nodeBubbles.push(a)}})}}},applyGravity=a=>{for(let b=0;b<planets.length;b++){let c=n(a.x,a.y,planets[b].x,planets[b].y);let d=m(a.x,a.y,planets[b].x,planets[b].y);motionAdd(a,1/a.mass*gravityPower*(a.mass*planets[b].mass)/(c*c),d)}},moveGameObjects=c=>{for(let d=0;d<c.length;d++)c[d].x+=o(c[d].e,c[d].d),c[d].y+=p(c[d].e,c[d].d),a(c[d].c,c[d].x,c[d].y),b(c[d].b,c[d].d,c[d].z,c[d].aa)},moveGameObjects2=c=>{for(let d=0;d<c.length;d++)motionAdd(c[d],c[d].currentAcceleration,c[d].facing),c[d].e=Math.min(c[d].e,c[d].f),c[d].x+=o(c[d].e,c[d].d),c[d].y+=p(c[d].e,c[d].d),a(c[d].c,c[d].x,c[d].y),b(c[d].b,c[d].facing,c[d].z,c[d].aa)},destroy=(a,b)=>{a[b].destroy?a[b].destroy(a[b].c):a[b].c.remove(),a.splice(b,1)},checkCollisions=(a,b)=>{for(let c=0;c<b.length;c++){if(a.owner&&a.owner.id==b[c].id)continue;if(collisionDistance=n(a.x,a.y,b[c].x,b[c].y),collisionDistance<a.collisionRadius+b[c].collisionRadius){a.life=0,b[c].life-=a.damage,updateHud(b[c],'life');break}}},buttonMoveDown=!1,buttonShootDown=!1,buttonTurnLeftDown=!1,buttonTurnRightDown=!1,document.body.onkeydown=a=>{a.which==38&&(buttonMoveDown=!0),a.which==37&&(buttonTurnLeftDown=!0),a.which==39&&(buttonTurnRightDown=!0),a.which==32&&(buttonShootDown=!0)},document.body.onkeyup=a=>{a.which==38&&(buttonMoveDown=!1),a.which==37&&(buttonTurnLeftDown=!1),a.which==39&&(buttonTurnRightDown=!1),a.which==32&&(buttonShootDown=!1)},controlUpdate=a=>{buttonMoveDown?players[a].currentAcceleration=players[a].l:players[a].currentAcceleration=0,buttonTurnLeftDown?players[a].g=Math.max(players[a].g-players[a].k,-players[a].h):buttonTurnRightDown?players[a].g=Math.min(players[a].g+players[a].k,players[a].h):players[a].g/=players[a].turnFriction,buttonShootDown&&(players[a].shoot=!0)},controlUpdate=a=>{let b=navigator.getGamepads();if(!b[a])return;if(b[a].buttons[0].pressed&&(players[a].shoot=!0),players[a].glitch--,b[a].buttons[2].pressed&&players[a].glitch<0){players[a].glitch=players[a].glitchTime,players[a].x+=Math.random()*2e3-1e3,players[a].y+=Math.random()*2e3-1e3;let c=boatWrapper.cloneNode(!0);c.id='',topLayer.appendChild(c),glitches.push({c:c,b:c.children[0],glitchLog:players[a].glitchLog}),players[a].glitchLog=[]}players[a].glitchLog.push([players[a].x,players[a].y,players[a].facing]),b[a].buttons[7].value>.2?players[a].currentAcceleration=b[a].buttons[7].value*players[a].l:players[a].currentAcceleration=0,b[a].axes[0]>.3||b[a].axes[0]<-.3?players[a].g=Math.round(b[a].axes[0]*players[a].h):players[a].g/=players[a].turnFriction,b[a].buttons[6].pressed&&(zoom+=.1,zoom=Math.min(10,zoom)),b[a].buttons[4].pressed&&(zoom-=.1,zoom=Math.max(.1,zoom))},ai=a=>{closestPlayer=0,closestPlayerDistance=0;for(let b=0;b<players.length;b++)playerDisatance=n(a.x,a.y,players[b].x,players[b].y),(!closestPlayer||closestPlayerDistance>playerDisatance)&&(closestPlayer=players[b],closestPlayerDistance=playerDisatance);Math.random()<.8?(a.currentAcceleration=a.l,t=(a.facing-m(a.x,a.y,closestPlayer.x,closestPlayer.y)+360)%360,closestPlayerDistance<200&&(t=-t+360),t<180?t>3?a.g=Math.max(a.g-a.k,-a.h):(a.shoot=!0,a.g/=1.2):t>180&&(t<357?a.g=Math.min(a.g+a.k,a.h):(a.shoot=!0,a.g/=1.2))):(a.currentAccelleration=0,a.g/=1.2)},stateStartInit=()=>{svgStartNode.style.display='block',svgDeadNode.style.display='none',state=stateStart},stateStart=()=>{buttonShootDown&&stateGameInit();let a=navigator.getGamepads();for(let b=0;b<a.length;b++)a[b]&&a[b].buttons[9].pressed&&stateGameInit()},stateGameInit=()=>{svgStartNode.style.display='none',svgDeadNode.style.display='none',state=stateGame,createSolarSystem(solarSystemData),createPlayer({ag:5}),createHud(hudData,players[0]),s(!0)},stateGame=()=>{for(let b=0;b<planets.length;b++)planets[b].angle+=planets[b].orbitSpeed,planets[b].x=o(planets[b].distance,planets[b].angle),planets[b].y=p(planets[b].distance,planets[b].angle),a(planets[b].c,planets[b].x,planets[b].y),planets[b].c.children[planets[b].c.children.length-1].transform.baseVal[0].setRotate(m(0,0,planets[b].x,planets[b].y),0,0);for(let a=0;a<players.length;a++)checkCollisions(players[a],planets),players[a].life>0?(applyGravity(players[a]),controlUpdate(a),updatePlayer(players[a])):(createExplosion(players[a].x,players[a].y,players[a].explosionSound),destroy(players,a));for(let a=0;a<cpus.length;a++)checkCollisions(cpus[a],planets),cpus[a].life>0?(applyGravity(cpus[a]),ai(cpus[a]),updatePlayer(cpus[a])):(createExplosion(cpus[a].x,cpus[a].y,cpus[a].explosionSound),destroy(cpus,a));for(let c=0;c<glitches.length;c++)glitches[c].glitchLog[0]&&(a(glitches[c].c,glitches[c].glitchLog[0][0],glitches[c].glitchLog[0][1]),b(glitches[c].b,glitches[c].glitchLog[0][2],16,4)),glitches[c].glitchLog.shift()||destroy(glitches,c);moveGameObjects2(players),moveGameObjects2(cpus),moveGameObjects(bullets);for(let a=0;a<bullets.length;a++)applyGravity(bullets[a]),checkCollisions(bullets[a],players),checkCollisions(bullets[a],cpus),checkCollisions(bullets[a],planets),bullets[a].life--,bullets[a].life<=0&&(createExplosion(bullets[a].x,bullets[a].y,bullets[a].owner.explosionSound),destroy(bullets,a));for(let b=0;b<ac.length;b++)ac[b].x+=o(ac[b].e,ac[b].d),ac[b].y+=p(ac[b].e,ac[b].d),ac[b].animate(ac[b]),a(ac[b].c,ac[b].x,ac[b].y),ac[b].life--,ac[b].life<0&&destroy(ac,b);players[0]&&(svgNode.viewBox.baseVal.x=players[0].x-window.innerWidth*zoom/2,svgNode.viewBox.baseVal.y=players[0].y-window.innerHeight*zoom/2,svgNode.viewBox.baseVal.width=window.innerWidth*zoom,svgNode.viewBox.baseVal.height=window.innerHeight*zoom);while(cpus.length<3)createCpu({lifeMax:1});players.length||stateDeadInit()},stateDeadInit=()=>{svgStartNode.style.display='none',svgDeadNode.style.display='block',state=stateDead;while(players.length)destroy(players,0);while(cpus.length)destroy(cpus,0);while(ac.length)destroy(ac,0);while(bullets.length)destroy(bullets,0);while(glitches.length)destroy(glitches,0);while(planets.length)destroy(planets,0);while(stars.length)destroy(planets,0);while(hudLayer.firstChild)hudLayer.removeChild(hudLayer.firstChild)},stateDead=()=>{buttonShootDown&&stateGameInit();let a=navigator.getGamepads();for(let b=0;b<a.length;b++)a[b]&&a[b].buttons[9].pressed&&stateGameInit()},zoom=2,gravityPower=2500,cpus=[],glitches=[],players=[],planets=[],bullets=[],ac=[],createNodes=(b,c,d)=>{while(b.length<1e3){let a=c.cloneNode(!0);a.id='',d.appendChild(a),b.push(a)}},nodeExplosions=[],createNodes(nodeExplosions,explosion,topLayer),nodeBullets=[],createNodes(nodeBullets,bullet,bottomLayer),nodeBubbles=[],createNodes(nodeBubbles,bubbleParticle,bottomLayer),createSolarSystem=a=>{a.planets.forEach((d,c)=>{let b=d.cloneNode(!0);b.id='';let a={c:b,distance:1e3*c,angle:Math.random()*360,scale:c>0?Math.random()+.5:3,orbitSpeed:.1-1e-5*(300*c)};a.collisionRadius=100*a.scale,a.mass=a.scale*10,planets.push(a),b.transform.baseVal[1].setScale(a.scale,a.scale),planetLayer.appendChild(b)})},solarSystemData={planets:[sunStar,planetOrange,planetBlue,planetGrey,planetOrange,planetBlue,planetGrey],stars:{count:1e4,field:{width:window.innerWidth*15,height:window.innerHeight*15}}};for(let b=0;b<solarSystemData.stars.count;b++){let a=starNode.cloneNode(!0);a.id='',a.r.baseVal.value=Math.random()*5,a.cx.baseVal.value=solarSystemData.stars.field.width*2*Math.random()-solarSystemData.stars.field.width,a.cy.baseVal.value=solarSystemData.stars.field.height*2*Math.random()-solarSystemData.stars.field.height,a.style.opacity=Math.random(),a.style.fill='#c0f7ff',Math.random()<=.5?a.style.fill='#fff':Math.random()<=.5&&(a.style.fill='#fffec4'),stars.appendChild(a)}createPlayer=c=>{let a=boatWrapper.cloneNode(!0);a.id='',a.setAttributeNS(null,'class','player1'),topLayer.appendChild(a);let b={id:Math.floor(Math.random()*1e6),c:a,b:a.children[0],z:33.5,aa:26.5,lifeMax:20,hud:{},shootSound:soundGenerator.generateLaserShoot(),explosionSound:soundGenerator.generateExplosion(),x:Math.random()*5e3-2500,y:Math.random()*5e3-2500,d:0,facing:0,e:0,mass:1,collisionRadius:30,f:15,l:.4,friction:1.1,g:0,h:5,k:.5,turnFriction:1.2,currentAcceleration:0,shoot:!1,af:0,ag:10,gunMount:0,gunMounts:[20,-20],glitch:0,glitchMax:20,glitchLog:[],glitchTime:30,ad:{ae:bubbleParticle,af:0,ag:1,ah:1}};for(let d in c)b[d]=c[d];b.life=b.lifeMax,players.push(b)},createCpu=a=>{createPlayer(a),cpuPlayer=players.pop(),cpuPlayer.c.setAttributeNS(null,'class','player2'),cpus.push(cpuPlayer)},updatePlayer=a=>{a.facing+=a.g;while(a.facing>360)a.facing-=360;while(a.facing<0)a.facing+=360;a.ad.af--,a.currentAcceleration>.1&&emit(a.ad,a.x,a.y,25,a.facing),a.af--,a.shoot&&a.af<0&&nodeBullets.length&&(playSound(a.shootSound,a.x,a.y),a.af=a.ag,am=nodeBullets.pop(),am.style.display='',bullets.push({owner:a,c:am,b:am,z:0,aa:0,x:a.x+o(a.gunMounts[a.gunMount],a.facing+90),y:a.y+p(a.gunMounts[a.gunMount],a.facing+90),d:a.facing,e:30,life:200,mass:.8,collisionRadius:10,damage:1,ad:{ae:bubbleParticle,af:0,ag:1,ah:1},destroy:a=>{a.style.display='none',nodeBullets.push(a)}}),a.gunMount++,a.gunMount>=a.gunMounts.length&&(a.gunMount=0)),a.shoot=!1},createHud=(b,c)=>{for(let d=0;d<b.length;d++){let e=hud.cloneNode(!0);if(e.id='hud'+b[d].id.charAt(0).toUpperCase()+b[d].id.substr(1).toLowerCase(),hScale=window.innerWidth/900*.1+.5,e.transform.baseVal[1].setScale(hScale,hScale),b[d].hasOwnProperty('hAlign')&&b[d].hAlign==='right'){e.setAttributeNS(null,'class','hudRight');let g=e.children[0].children[0];let h=436;g.transform.baseVal[1].setScale(-1,1),a(g,h,0),a(e.children[0].children[1],h-112,76)}let f=e.children[1];e.children[0].children[1].innerHTML=b[d].text;for(let a=0;a<c.lifeMax;a++){let e=a==0?f.children[0]:f.children[0].cloneNode(!0);e.setAttributeNS(null,'x',a*b[d].bars.offset),a>=c[b[d].id]&&e.setAttributeNS(null,'class','hudBar hudBarE'),f.appendChild(e)}e.style.display='',hudLayer.appendChild(e),c.hud[b[d].id]=hudLayer.children[hudLayer.children.length-1]}},updateHud=(a,b)=>{a[b]>=0&&a.hud.hasOwnProperty(b)&&a.hud[b].children[1].children[a[b]].setAttributeNS(null,'class','hudBar hudBarE')},hudData=[{id:'glitch',hAlign:'right',bars:{width:16,offset:22},text:'GLITCH'},{id:'life',bars:{width:16,offset:22},text:'HEALTH'}],s=a=>{state(),a!==!0&&requestAnimationFrame(s)},stateStartInit(),s()